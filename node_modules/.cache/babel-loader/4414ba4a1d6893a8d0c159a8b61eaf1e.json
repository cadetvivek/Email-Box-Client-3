{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cp\\\\Desktop\\\\Email-box-3\\\\src\\\\components\\\\pages\\\\Inbox.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styles from \"./Home.module.css\";\nimport { getUsername } from \"../../helper\";\nimport { mailActions } from \"../../store/mailSlice\";\nimport Mail from \"./Mail\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Inbox = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const [inboxMail, setInboxMail] = useState([]);\n  const user = localStorage.getItem(\"email\");\n  const username = getUsername(user);\n  useEffect(() => {\n    const timer = setInterval(() => {\n      let mails = [];\n      fetch(`https://project-1d90b-default-rtdb.firebaseio.com/${username}/receiver.json`).then(res => {\n        return res.json();\n      }).then(data => {\n        let notOpened = 0;\n\n        for (let [key, value] of Object.entries(data)) {\n          mails.push({\n            key,\n            ...value\n          });\n\n          if (value.isOpen === false) {\n            notOpened += 1;\n          }\n        }\n\n        setInboxMail(mails);\n        dispatch(mailActions.countNotOpened(notOpened));\n      });\n    }, 2000);\n    return () => clearInterval(timer);\n  }, [dispatch]);\n\n  const deleteHandler = key => {\n    fetch(`https://project-1d90b-default-rtdb.firebaseio.com/${username}/receiver/${key}.json`, {\n      method: \"DELETE\"\n    }).then(res => {\n      const inboxMailCopy = [...inboxMail];\n      const index = inboxMailCopy.findIndex(item => item.key === key);\n      inboxMailCopy.splice(index, 1);\n      setInboxMail(inboxMailCopy);\n    });\n  };\n\n  const notOpened = useSelector(state => state.mail.totalNotOpened);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.sidebar,\n        children: [/*#__PURE__*/_jsxDEV(NavLink, {\n          to: \"/home\",\n          className: styles.none,\n          activeClassName: styles.active,\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Compose\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          to: \"/inbox\",\n          className: styles.none,\n          activeClassName: styles.active,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Inbox \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.unread,\n              children: [\"Unread (\", notOpened, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n          to: \"/sent\",\n          className: styles.none,\n          activeClassName: styles.active,\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Sent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.mailsContainer,\n        children: inboxMail.map(mail => {\n          return /*#__PURE__*/_jsxDEV(Mail, {\n            mail: mail,\n            deleteItem: deleteHandler,\n            isSentBox: false\n          }, mail.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 20\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Inbox, \"uf/C5br/l94AS8EuwYx+gD+ozi8=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Inbox;\nexport default Inbox;\n\nvar _c;\n\n$RefreshReg$(_c, \"Inbox\");","map":{"version":3,"names":["React","Fragment","useEffect","useState","NavLink","useSelector","useDispatch","styles","getUsername","mailActions","Mail","Inbox","dispatch","inboxMail","setInboxMail","user","localStorage","getItem","username","timer","setInterval","mails","fetch","then","res","json","data","notOpened","key","value","Object","entries","push","isOpen","countNotOpened","clearInterval","deleteHandler","method","inboxMailCopy","index","findIndex","item","splice","state","mail","totalNotOpened","container","sidebar","none","active","unread","mailsContainer","map"],"sources":["C:/Users/cp/Desktop/Email-box-3/src/components/pages/Inbox.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styles from \"./Home.module.css\";\nimport { getUsername } from \"../../helper\";\nimport { mailActions } from \"../../store/mailSlice\";\nimport Mail from \"./Mail\";\n\nconst Inbox = () => {\n  const dispatch = useDispatch();\n  const [inboxMail, setInboxMail] = useState([]);\n  const user = localStorage.getItem(\"email\");\n  const username = getUsername(user);\n  useEffect(() => {\n    const timer = setInterval(() => {\n      let mails = [];  \n    \n    fetch(\n      `https://project-1d90b-default-rtdb.firebaseio.com/${username}/receiver.json`\n    )\n      .then((res) => {\n        return res.json();\n      })\n      .then((data) => {\n        let notOpened = 0;\n        for (let [key, value] of Object.entries(data)) {\n          mails.push({ key, ...value });\n          if (value.isOpen === false) {\n            notOpened += 1;\n          }\n        }\n        setInboxMail(mails);\n        dispatch(mailActions.countNotOpened(notOpened));\n      })\n  \n    }, 2000);\n    return () => clearInterval(timer);\n  }, [dispatch]);\n\n  const deleteHandler = (key) => {\n     fetch(`https://project-1d90b-default-rtdb.firebaseio.com/${username}/receiver/${key}.json`, {\n        method: \"DELETE\",\n    }).then((res) => {\n      const inboxMailCopy = [...inboxMail]\n        const index = inboxMailCopy.findIndex((item) => item.key === key);\n        inboxMailCopy.splice(index, 1)\n        setInboxMail(inboxMailCopy);\n    })\n  }\n\n  const notOpened = useSelector((state) => state.mail.totalNotOpened);\n\n  return (\n    <Fragment>\n      <div className={styles.container}>\n        <div className={styles.sidebar}>\n          <NavLink\n            to=\"/home\"\n            className={styles.none}\n            activeClassName={styles.active}\n          >\n            {\" \"}\n            <div>Compose</div>\n          </NavLink>\n          <NavLink\n            to=\"/inbox\"\n            className={styles.none}\n            activeClassName={styles.active}\n          >\n            <div>\n              Inbox <span className={styles.unread}>Unread ({notOpened})</span>\n            </div>\n          </NavLink>\n          <NavLink\n            to=\"/sent\"\n            className={styles.none}\n            activeClassName={styles.active}\n          >\n            {\" \"}\n            <div>Sent</div>\n          </NavLink>\n        </div>\n\n        <div className={styles.mailsContainer}>\n          {inboxMail.map((mail) => {\n            return <Mail key={mail.key} mail={mail} deleteItem={deleteHandler} isSentBox={false} />;\n          })}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\nexport default Inbox;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}